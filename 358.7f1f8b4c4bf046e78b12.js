(self.webpackChunknews=self.webpackChunknews||[]).push([[358],{4603:function(e,n,t){"use strict";var r=t(4836);n.Z=void 0;var o=r(t(4938)),i=t(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Comment");n.Z=s},4613:function(e,n,t){"use strict";var r=t(4836);n.Z=void 0;var o=r(t(4938)),i=t(5893),s=(0,o.default)((0,i.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");n.Z=s},4938:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=t(1151)},5949:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var r=t(7462),o=t(7294),i=t(3366),s=t(6010),a=t(4780),c=t(8216),l=t(1657),u=t(948),d=t(1588),m=t(4867);function f(e){return(0,m.Z)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var h=t(5893);const v=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],p=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,"inherit"!==t.color&&n[`color${(0,c.Z)(t.color)}`],n[`fontSize${(0,c.Z)(t.fontSize)}`]]}})((({theme:e,ownerState:n})=>{var t,r,o,i,s,a,c,l,u,d,m,f,h,v,p,x,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=e.transitions)||null==(r=t.create)?void 0:r.call(t,"fill",{duration:null==(o=e.transitions)||null==(i=o.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(c=e.typography)||null==(l=c.pxToRem)?void 0:l.call(c,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(m=null==(f=(e.vars||e).palette)||null==(h=f[n.color])?void 0:h.main)?m:{action:null==(v=(e.vars||e).palette)||null==(p=v.action)?void 0:p.active,disabled:null==(x=(e.vars||e).palette)||null==(g=x.action)?void 0:g.disabled,inherit:void 0}[n.color]}})),x=o.forwardRef((function(e,n){const t=(0,l.Z)({props:e,name:"MuiSvgIcon"}),{children:o,className:u,color:d="inherit",component:m="svg",fontSize:x="medium",htmlColor:g,inheritViewBox:b=!1,titleAccess:y,viewBox:Z="0 0 24 24"}=t,j=(0,i.Z)(t,v),S=(0,r.Z)({},t,{color:d,component:m,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:Z}),w={};b||(w.viewBox=Z);const C=(e=>{const{color:n,fontSize:t,classes:r}=e,o={root:["root","inherit"!==n&&`color${(0,c.Z)(n)}`,`fontSize${(0,c.Z)(t)}`]};return(0,a.Z)(o,f,r)})(S);return(0,h.jsxs)(p,(0,r.Z)({as:m,className:(0,s.Z)(C.root,u),focusable:"false",color:g,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:n},w,j,{ownerState:S,children:[o,y?(0,h.jsx)("title",{children:y}):null]}))}));x.muiName="SvgIcon";var g=x;function b(e,n){function t(t,o){return(0,h.jsx)(g,(0,r.Z)({"data-testid":`${n}Icon`,ref:o},t,{children:e}))}return t.muiName=g.muiName,o.memo(o.forwardRef(t))}},1151:function(e,n,t){"use strict";t.r(n),t.d(n,{capitalize:function(){return o.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return s.Z},debounce:function(){return a},deprecatedPropType:function(){return c},isMuiElement:function(){return d},ownerDocument:function(){return f},ownerWindow:function(){return h},requirePropFactory:function(){return v},setRef:function(){return p},unstable_ClassNameGenerator:function(){return I},unstable_useEnhancedEffect:function(){return x},unstable_useId:function(){return y},unsupportedProp:function(){return Z},useControlled:function(){return j},useEventCallback:function(){return S.Z},useForkRef:function(){return w.Z},useIsFocusVisible:function(){return C.Z}});var r=t(7078),o=t(8216),i=function(...e){return e.reduce(((e,n)=>null==n?e:function(...t){e.apply(this,t),n.apply(this,t)}),(()=>{}))},s=t(5949),a=function(e,n=166){let t;function r(...r){clearTimeout(t),t=setTimeout((()=>{e.apply(this,r)}),n)}return r.clear=()=>{clearTimeout(t)},r},c=function(e,n){return()=>null},l=t(7294),u=t.t(l,2),d=function(e,n){return l.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)};function m(e){return e&&e.ownerDocument||document}var f=m,h=function(e){return m(e).defaultView||window};t(7462);var v=function(e,n){return()=>null},p=t(7960).Z,x=t(6600).Z;let g=0;const b=u.useId;var y=function(e){if(void 0!==b){const n=b();return null!=e?e:n}return function(e){const[n,t]=l.useState(e),r=e||n;return l.useEffect((()=>{null==n&&(g+=1,t(`mui-${g}`))}),[n]),r}(e)},Z=function(e,n,t,r,o){return null},j=function({controlled:e,default:n,name:t,state:r="value"}){const{current:o}=l.useRef(void 0!==e),[i,s]=l.useState(n);return[o?e:i,l.useCallback((e=>{o||s(e)}),[])]},S=t(5430),w=t(8192),C=t(3511);const I={configure:e=>{r.Z.configure(e)}}},6102:function(e,n,t){"use strict";const r=t(2861).Z.create({baseURL:"https://hacker-news.firebaseio.com/v0"});n.Z=r},5822:function(e,n,t){"use strict";var r=t(7294);let o;n.Z=(e,n,t)=>{const[i,s]=(0,r.useState)(),[a,c]=(0,r.useState)("passive"),l=(0,r.useCallback)((()=>{return n=void 0,t=void 0,o=function*(){yield e().then((e=>{if(!e)throw Error("empty response");s(e),c("success")})).catch((()=>{c("error")}))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(n,t||[])).next())}));var n,t,r,o}),[e]),u=(0,r.useCallback)((()=>{s(void 0),c("passive")}),[]);return(0,r.useEffect)((()=>{if("loading"!==a&&"error"!==a&&!t&&(i||(c("loading"),l()),n))return o=setInterval((()=>{l()}),n),()=>{clearInterval(o)}}),[t,i,n,l,a]),{data:i,refetch:u,isLoading:"loading"===a,isError:"error"===a,isSuccess:"success"===a}}},3358:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return G}});var r=t(5893),o=t(7294),i=t(5822),s=t(9250),a=t(6102),c=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))},l=new class{constructor(e){this.apiInstance=e}getStoryData(e){return c(this,void 0,void 0,(function*(){const n=yield this.apiInstance.get(`item/${e}.json`).then((({data:e})=>e));return Object.assign({text:n.text||"No text"},n)}))}getCommentsData(e){return c(this,void 0,void 0,(function*(){if(!e)return;const n=e.map((e=>this.apiInstance.get(`item/${e}.json`).then((({data:e})=>e))));return(yield Promise.allSettled(n).then((e=>e.filter((e=>"fulfilled"===e.status&&e.value))))).map((({value:e})=>e))}))}}(a.Z),u=t(7484),d=t.n(u),m=t(2658),f=t(7462),h=t(3366),v=t(6010),p=t(9659),x=t(6523),g=t(9707),b=t(7878);const y=["className","component"];var Z=t(7078);var j=function(e={}){const{defaultTheme:n,defaultClassName:t="MuiBox-root",generateClassName:i}=e,s=(0,p.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(x.Z);return o.forwardRef((function(e,o){const a=(0,b.Z)(n),c=(0,g.Z)(e),{className:l,component:u="div"}=c,d=(0,h.Z)(c,y);return(0,r.jsx)(s,(0,f.Z)({as:u,ref:o,className:(0,v.Z)(l,i?i(t):t),theme:a},d))}))}({defaultTheme:(0,t(9617).Z)(),defaultClassName:"MuiBox-root",generateClassName:Z.Z.generate}),S=t(4780),w=t(8216),C=t(948),I=t(1657),k=t(3511),z=t(8192),M=t(1588),O=t(4867);function D(e){return(0,O.Z)("MuiLink",e)}var N=(0,M.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),R=t(4844),H=t(1796);const L={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"};var T=({theme:e,ownerState:n})=>{const t=(e=>L[e]||e)(n.color),r=(0,R.DW)(e,`palette.${t}`,!1)||n.color,o=(0,R.DW)(e,`palette.${t}Channel`);return"vars"in e&&o?`rgba(${o} / 0.4)`:(0,H.Fq)(r,.4)};const B=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],V=(0,C.ZP)(m.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n[`underline${(0,w.Z)(t.underline)}`],"button"===t.component&&n.button]}})((({theme:e,ownerState:n})=>(0,f.Z)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,f.Z)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:T({theme:e,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${N.focusVisible}`]:{outline:"auto"}})));var F=o.forwardRef((function(e,n){const t=(0,I.Z)({props:e,name:"MuiLink"}),{className:i,color:s="primary",component:a="a",onBlur:c,onFocus:l,TypographyClasses:u,underline:d="always",variant:m="inherit",sx:p}=t,x=(0,h.Z)(t,B),{isFocusVisibleRef:g,onBlur:b,onFocus:y,ref:Z}=(0,k.Z)(),[j,C]=o.useState(!1),M=(0,z.Z)(n,Z),O=(0,f.Z)({},t,{color:s,component:a,focusVisible:j,underline:d,variant:m}),N=(e=>{const{classes:n,component:t,focusVisible:r,underline:o}=e,i={root:["root",`underline${(0,w.Z)(o)}`,"button"===t&&"button",r&&"focusVisible"]};return(0,S.Z)(i,D,n)})(O);return(0,r.jsx)(V,(0,f.Z)({color:s,className:(0,v.Z)(N.root,i),classes:u,component:a,onBlur:e=>{b(e),!1===g.current&&C(!1),c&&c(e)},onFocus:e=>{y(e),!0===g.current&&C(!0),l&&l(e)},ref:M,ownerState:O,variant:m,sx:[...Object.keys(L).includes(s)?[]:[{color:s}],...Array.isArray(p)?p:[p]]},x))})),P=t(4551),$=t(9062),_=(0,t(5949).Z)((0,r.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Comment"),E=t(7228),A=t(4603),Y=({comment:{time:e,by:n,text:t,kids:i},setCommitsQty:s})=>{const[a,c]=(0,o.useState)(!1);return(0,r.jsxs)(j,Object.assign({onClick:()=>{c(!0)},sx:{display:"flex",width:"100%",flexDirection:"column",alignItems:"flex-start",padding:2,cursor:"pointer"}},{children:[(0,r.jsxs)(j,Object.assign({sx:{display:"flex",alignItems:"center",marginBottom:2}},{children:[(0,r.jsxs)(m.Z,Object.assign({variant:"caption"},{children:["Author: ",n]})),(0,r.jsx)(m.Z,Object.assign({variant:"caption",sx:{fontWeight:"bold",marginLeft:1}},{children:d().unix(e).format("YYYY-MM-DD HH:mm")}))]})),(0,r.jsx)(j,Object.assign({sx:{display:"flex",alignItems:"center",margin:"2px 0"}},{children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:t||""}})})),i&&(0,r.jsxs)(j,Object.assign({sx:{display:"flex",alignItems:"center",marginTop:2}},{children:[(0,r.jsx)(A.Z,{sx:{marginRight:1}}),(0,r.jsxs)(m.Z,Object.assign({variant:"caption"},{children:[i.length," comments"]}))]})),i&&a&&(0,r.jsx)(j,Object.assign({sx:{marginLeft:4}},{children:(0,r.jsx)(W,{kidsIds:i,setCommitsQty:s})}))]}))},W=(0,o.memo)((({kidsIds:e,setCommitsQty:n,commentsData:t})=>{var s;const{data:a,isLoading:c}=(0,i.Z)((()=>l.getCommentsData(e)),void 0,!!t);return(0,o.useEffect)((()=>{n((n=>n+((null==e?void 0:e.length)||0)))}),[]),c?(0,r.jsx)($.Z,{}):(0,r.jsx)(r.Fragment,{children:null===(s=t||a)||void 0===s?void 0:s.map((e=>(0,r.jsx)(Y,{comment:e,setCommitsQty:n},e.id)))})})),Q=t(4613),q=()=>{const{storyId:e}=(0,s.UO)(),n=(0,s.s0)(),[t,a]=(0,o.useState)(0),{data:c,isError:u,isLoading:f}=(0,i.Z)((()=>l.getStoryData(e||"0"))),{data:h,isLoading:v,refetch:p}=(0,i.Z)((()=>l.getCommentsData(null==c?void 0:c.kids)));return f?(0,r.jsx)(E.a,{}):u?(0,r.jsx)(m.Z,Object.assign({variant:"h1",color:"red"},{children:"Error"})):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j,Object.assign({onClick:()=>{n("/")},sx:{position:"absolute",display:"flex",alignItems:"center",gap:1,top:32,left:32,cursor:"pointer"}},{children:[(0,r.jsx)(Q.Z,{})," Go back"]})),(0,r.jsxs)(j,Object.assign({sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:4}},{children:[(0,r.jsx)(F,Object.assign({href:null==c?void 0:c.url,mb:2,target:"_blank"},{children:null==c?void 0:c.title})),(0,r.jsxs)(j,Object.assign({sx:{display:"flex",alignItems:"center",marginBottom:2}},{children:[(0,r.jsxs)(m.Z,Object.assign({variant:"caption"},{children:["Author: ",null==c?void 0:c.by]})),(0,r.jsx)(m.Z,Object.assign({variant:"caption",sx:{fontWeight:"bold",marginLeft:1}},{children:d().unix((null==c?void 0:c.time)||0).format("YYYY-MM-DD HH:mm")}))]})),(0,r.jsx)(j,Object.assign({sx:{display:"flex",alignItems:"center",margin:"2px 0"}},{children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:null==c?void 0:c.text}})})),0!==t&&(0,r.jsxs)(j,Object.assign({sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",marginTop:2}},{children:[(0,r.jsxs)(j,Object.assign({sx:{display:"flex",alignItems:"center"}},{children:[(0,r.jsx)(_,{sx:{marginRight:1}}),(0,r.jsxs)(m.Z,Object.assign({variant:"caption"},{children:[t," comments"]}))]})),(0,r.jsx)(P.Z,Object.assign({onClick:()=>{a(0),p()},variant:"contained"},{children:"Refetch comments"}))]})),v?(0,r.jsx)($.Z,{sx:{marginTop:5}}):(0,r.jsx)(j,Object.assign({sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:2}},{children:(0,r.jsx)(W,{kidsIds:null==c?void 0:c.kids,setCommitsQty:a,commentsData:h})}))]}))]})},G=()=>(0,r.jsx)(q,{})},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);