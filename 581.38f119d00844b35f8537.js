"use strict";(self.webpackChunknews=self.webpackChunknews||[]).push([[581],{6102:function(e,t,n){const i=n(2861).Z.create({baseURL:"https://hacker-news.firebaseio.com/v0"});t.Z=i},5822:function(e,t,n){var i=n(7294);let s;t.Z=(e,t,n)=>{const[r,a]=(0,i.useState)(),[c,o]=(0,i.useState)("passive"),l=(0,i.useCallback)((()=>{return t=void 0,n=void 0,s=function*(){yield e().then((e=>{if(!e)throw Error("empty response");a(e),o("success")})).catch((()=>{o("error")}))},new((i=void 0)||(i=Promise))((function(e,r){function a(e){try{o(s.next(e))}catch(e){r(e)}}function c(e){try{o(s.throw(e))}catch(e){r(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,c)}o((s=s.apply(t,n||[])).next())}));var t,n,i,s}),[e]),h=(0,i.useCallback)((()=>{a(void 0),o("passive")}),[]);return(0,i.useEffect)((()=>{if("loading"!==c&&"error"!==c&&!n&&(r||(o("loading"),l()),t))return s=setInterval((()=>{l()}),t),()=>{clearInterval(s)}}),[n,r,t,l,c]),{data:r,refetch:h,isLoading:"loading"===c,isError:"error"===c,isSuccess:"success"===c}}},2581:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(5893),s=n(4680),r=n(8973),a=n(2658),c=n(4551),o=n(7896),l=n(9573),h=n(8732),d=n(2498),u=n(9250),g=n(5822),j=n(6102),v=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{o(i.next(e))}catch(e){r(e)}}function c(e){try{o(i.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}o((i=i.apply(e,t||[])).next())}))},f=new class{constructor(e){this.apiInstance=e}getNewStoriesIds(){return v(this,void 0,void 0,(function*(){return this.apiInstance.get('newstories.json?orderBy="$key"&limitToFirst=100').then((({data:e})=>e))}))}getStoriesData(){return v(this,void 0,void 0,(function*(){const e=(yield this.getNewStoriesIds()).map((e=>this.apiInstance.get(`item/${e}.json`).then((({data:e})=>e))));return(yield Promise.allSettled(e).then((e=>e.filter((e=>"fulfilled"===e.status&&(null==e?void 0:e.value)))))).map((({value:e})=>e)).sort(((e,t)=>e.time-t.time))}))}}(j.Z),x=n(6011),p=n(3694),w=n(6926),b=()=>(0,i.jsx)(x.Z,{children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(w.Z,{children:"Title"}),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:"Rate"})),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:"Nick name"})),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:"Date"}))]})}),Z=n(7484),y=n.n(Z),m=({onOpenNewsStoryHandler:e,story:{title:t,time:n,score:s,by:r,id:a}})=>(0,i.jsxs)(p.Z,Object.assign({hover:!0,sx:{cursor:"pointer","&:last-child td, &:last-child th":{border:0}},onClick:()=>e(a)},{children:[(0,i.jsx)(w.Z,Object.assign({component:"th",scope:"row"},{children:t})),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:s})),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:r})),(0,i.jsx)(w.Z,Object.assign({align:"right"},{children:y().unix(n).format("YYYY-DD-MM")}))]})),O=()=>{const{data:e,isLoading:t,isError:n,refetch:j}=(0,g.Z)(f.getStoriesData.bind(f),6e4),v=(0,u.s0)(),x=e=>{v(`story/${e}`)};return t?(0,i.jsx)(d.Z,Object.assign({sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},{children:(0,i.jsx)(s.Z,Object.assign({elevation:0,sx:{width:"100%",height:"90vh",overflow:"hidden"}},{children:[...Array(10).keys()].map((e=>(0,i.jsx)(r.Z,{width:"100%",height:"70px",animation:"wave"},e)))}))})):n?(0,i.jsx)(a.Z,Object.assign({variant:"h1",color:"red"},{children:"Error"})):(0,i.jsxs)(d.Z,Object.assign({sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,i.jsx)(c.Z,Object.assign({onClick:j,sx:{position:"absolute",top:"5%",right:"5%"},variant:"contained"},{children:"Refetch"})),(0,i.jsx)(s.Z,Object.assign({elevation:1,variant:"elevation",sx:{width:"100%",height:"90vh",overflow:"hidden"}},{children:(0,i.jsx)(o.Z,Object.assign({sx:{maxHeight:"100%",maxWidth:"100%"}},{children:(0,i.jsxs)(l.Z,Object.assign({stickyHeader:!0},{children:[(0,i.jsx)(b,{}),(0,i.jsx)(h.Z,{children:null==e?void 0:e.map((e=>(0,i.jsx)(m,{onOpenNewsStoryHandler:x,story:e},e.id)))})]}))}))}))]}))},k=()=>(0,i.jsx)(O,{})}}]);